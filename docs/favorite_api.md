---

````markdown
# ğŸ¾ Favorites API ëª…ì„¸ì„œ

> ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë³„ë¡œ **ì°œí•œ ë™ë¬¼ ID ëª©ë¡**ì„ ê´€ë¦¬í•˜ëŠ” APIì…ë‹ˆë‹¤.  
> ì„¸ì…˜ ì¿ í‚¤(`session`) ê¸°ë°˜ ì¸ì¦ì´ í•„ìš”í•˜ë©°, ê° ìœ ì €ë³„ë¡œ í…ìŠ¤íŠ¸ íŒŒì¼(`user_favorites/<username>.txt`)ì— ë°ì´í„°ê°€ ì €ì¥ë©ë‹ˆë‹¤.

---

## ê¸°ë³¸ ì •ë³´

| í•­ëª©               | ë‚´ìš©                                                   |
| ------------------ | ------------------------------------------------------ |
| **Base URL**       | `/api/favorites`                                       |
| **ì¸ì¦ ë°©ì‹**      | Cookie ê¸°ë°˜ ì„¸ì…˜ (`session`)                           |
| **ì‘ë‹µ í˜•ì‹**      | `application/json`                                     |
| **ìš”ì²­ ë³¸ë¬¸ í˜•ì‹** | `application/json` (í•„ìš” ì‹œ)                           |
| **ìƒíƒœ ì €ì¥ ë°©ì‹** | ì‚¬ìš©ìë³„ í…ìŠ¤íŠ¸ íŒŒì¼ (`user_favorites/<username>.txt`) |

---

## API ê°œìš”

| Method     | Endpoint       | ì„¤ëª…                                |
| ---------- | -------------- | ----------------------------------- |
| **GET**    | `/`            | í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì°œ ëª©ë¡ ì¡°íšŒ |
| **POST**   | `/{animal_id}` | í•´ë‹¹ ë™ë¬¼ì„ ì°œ ëª©ë¡ì— ì¶”ê°€          |
| **DELETE** | `/{animal_id}` | í•´ë‹¹ ë™ë¬¼ì„ ì°œ ëª©ë¡ì—ì„œ ì œê±°        |

---

## 1ï¸. ì¦ê²¨ì°¾ê¸° ëª©ë¡ ì¡°íšŒ

### **GET** `/api/favorites/`

í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ì¦ê²¨ì°¾ê¸°(ì°œ) ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

#### Request

| í•­ëª©   | ì„¤ëª…                                         |
| ------ | -------------------------------------------- |
| Cookie | `session=<SESSION_ID>` (ë¡œê·¸ì¸ ì‹œ ìë™ ë°œê¸‰) |

#### Response (200 OK)

```json
{
  "ids": ["2024-000123", "2024-000456"]
}
```

#### Response (401 Unauthorized)

```json
{
  "detail": "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."
}
```

---

## 2ï¸. ì¦ê²¨ì°¾ê¸° ì¶”ê°€

### **POST** `/api/favorites/{animal_id}`

ì§€ì •í•œ ë™ë¬¼ IDë¥¼ í˜„ì¬ ì‚¬ìš©ìì˜ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€í•©ë‹ˆë‹¤.
ì´ë¯¸ ì¶”ê°€ë˜ì–´ ìˆìœ¼ë©´ ì¤‘ë³µ ì—†ì´ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.

#### Path Parameter

| ì´ë¦„        | íƒ€ì…     | ì„¤ëª…                             |
| ----------- | -------- | -------------------------------- |
| `animal_id` | `string` | ë™ë¬¼ ê³ ìœ  ì‹ë³„ì (`desertionNo`) |

#### Request Example

```bash
POST /api/favorites/2024-000999
Cookie: session=abcd1234
```

#### Response (200 OK)

```json
{
  "ids": ["2024-000123", "2024-000456", "2024-000999"]
}
```

#### Response (401 Unauthorized)

```json
{
  "detail": "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."
}
```

---

## 3. ì¦ê²¨ì°¾ê¸° ì œê±°

### **DELETE** `/api/favorites/{animal_id}`

ì§€ì •í•œ ë™ë¬¼ IDë¥¼ ì¦ê²¨ì°¾ê¸° ëª©ë¡ì—ì„œ ì œê±°í•©ë‹ˆë‹¤.
ì´ë¯¸ ëª©ë¡ì— ì—†ëŠ” ê²½ìš°ì—ë„ ì˜¤ë¥˜ ì—†ì´ ë©±ë“±ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

#### Path Parameter

| ì´ë¦„        | íƒ€ì…     | ì„¤ëª…                             |
| ----------- | -------- | -------------------------------- |
| `animal_id` | `string` | ë™ë¬¼ ê³ ìœ  ì‹ë³„ì (`desertionNo`) |

#### Request Example

```bash
DELETE /api/favorites/2024-000999
Cookie: session=abcd1234
```

#### Response (200 OK)

```json
{
  "ids": ["2024-000123", "2024-000456"]
}
```

#### Response (401 Unauthorized)

```json
{
  "detail": "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."
}
```

---

## ê³µí†µ ì˜¤ë¥˜ ì½”ë“œ

| ìƒíƒœ ì½”ë“œ | ìƒí™©                              | ì˜ˆì‹œ ì‘ë‹µ                             |
| --------- | --------------------------------- | ------------------------------------- |
| **401**   | ì¸ì¦ ì‹¤íŒ¨ (ì¿ í‚¤ ì—†ìŒ ë˜ëŠ” ë§Œë£Œë¨) | `{"detail": "ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."}`  |
| **422**   | ê²½ë¡œ ë³€ìˆ˜ í˜•ì‹ ì˜¤ë¥˜               | FastAPI ê¸°ë³¸ Validation Error         |
| **500**   | ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜                    | `{"detail": "Internal Server Error"}` |

---

## ì„œë²„ ë‚´ë¶€ ë™ì‘ (ìš”ì•½)

- `Depends(get_current_username)`ë¥¼ í†µí•´ ë¡œê·¸ì¸ ì‚¬ìš©ì ì‹ë³„

  ```python
  def get_current_username(request: Request) -> str:
      sid = request.cookies.get("session")
      if not sid or sid not in SESSIONS:
          raise HTTPException(status_code=401, detail="ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.")
      return SESSIONS[sid]
  ```

- ì‚¬ìš©ìë³„ ì¦ê²¨ì°¾ê¸° íŒŒì¼ ì €ì¥ ê²½ë¡œ

  ```
  user_favorites/<username>.txt
  ```

- íŒŒì¼ í¬ë§·

  ```
  2024-000123
  2024-000456
  2024-000789
  ```

---

## êµ¬í˜„ ê´€ë ¨ ì°¸ê³ 

| í•­ëª©            | ë‚´ìš©                                   |
| --------------- | -------------------------------------- |
| **íŒŒì¼ ê²½ë¡œ**   | `routers/favorites.py`                 |
| **ë¼ìš°í„° ë“±ë¡** | `app.include_router(favorites.router)` |
| **ì €ì¥ êµ¬ì¡°**   | í•œ ì¤„ë‹¹ í•˜ë‚˜ì˜ `animal_id`             |

---
